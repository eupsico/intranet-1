<div class="painel-rh-etapa">
  <div class="header-etapa mb-4">
    <h2 class="titulo-modulo">Recrutamento: Entrevista com Gestor</h2>
    <p class="descricao-modulo">
      Etapa de avaliação final pelo futuro gestor direto, seguida pela
      comunicação final da decisão para o candidato
      <span id="nome-candidato-gestor" class="badge bg-primary-eu"
        >Carregando Candidato...</span
      >.
    </p>
    <div id="alerta-status-gestor" class="mt-3"></div>
  </div>

  <div class="row">
    <div class="col-lg-6">
      <div class="card card-shadow mb-4">
        <div class="card-header bg-secondary text-white">
          <h5 class="mb-0">Histórico e Dados da Entrevista</h5>
        </div>
        <div class="card-body">
          <div class="mb-3">
            <label for="nome-gestor" class="form-label"
              >Gestor(a) Entrevistador(a):</label
            >
            <input
              type="text"
              class="form-control"
              id="nome-gestor"
              placeholder="Nome do Gestor"
              required
            />
          </div>
          <div class="mb-4">
            <label for="data-entrevista-gestor" class="form-label"
              >Data da Entrevista:</label
            >
            <input
              type="date"
              class="form-control"
              id="data-entrevista-gestor"
              required
            />
          </div>

          <hr />

          <h6>Resumo das Etapas Anteriores:</h6>
          <p class="card-text small">
            <strong>Triagem RH:</strong>
            <span id="resumo-triagem-gestor" class="text-success">...</span>
          </p>
          <p class="card-text small">
            <strong>Entrevista RH:</strong>
            <span id="resumo-entrevista-rh-gestor" class="text-success"
              >...</span
            >
          </p>
          <p class="card-text small">
            <strong>Testes/Estudos:</strong>
            <span id="resumo-testes-gestor" class="text-success">...</span>
          </p>
          
          <button
            type="button"
            id="btn-agendar-reuniao-gestor"
            class="btn btn-sm btn-outline-secondary my-2"
          >
            <i class="fas fa-calendar-alt me-2"></i> Agendar Reunião com Gestor
          </button>
          </div>
      </div>
    </div>

    <div class="col-lg-6">
      <div class="card card-shadow">
        <div class="card-header bg-danger-subtle">
          <h5 class="mb-0">Avaliação do Gestor e Comunicação Final</h5>
        </div>
        <div class="card-body">
          <form id="form-avaliacao-gestor">
            <div class="mb-3">
              <label for="perguntas-gestor" class="form-label"
                >Perguntas/Foco da Entrevista:</label
              >
              <textarea
                class="form-control"
                id="perguntas-gestor"
                rows="3"
                placeholder="Insira o foco ou as perguntas chave utilizadas pelo gestor (opcional, mas recomendado)."
              ></textarea>
            </div>

            <div class="mb-3">
              <label for="comentarios-gestor" class="form-label"
                >Comentários Finais do Gestor (Decisão de "Contratar?"):</label
              >
              <textarea
                class="form-control"
                id="comentarios-gestor"
                rows="3"
                placeholder="Foco na adequação técnica, fit com o time e observações sobre a proposta salarial."
              ></textarea>
            </div>

            <div class="mb-3">
              <label class="form-label d-block"
                >Resultado da Avaliação do Gestor:</label
              >
              <div class="form-check form-check-inline">
                <input
                  class="form-check-input"
                  type="radio"
                  name="aprovado-gestor"
                  id="aprovado-sim"
                  value="Sim"
                  required
                />
                <label class="form-check-label" for="aprovado-sim"
                  >APROVADO (Seguir com Contratação)</label
                >
              </div>
              <div class="form-check form-check-inline">
                <input
                  class="form-check-input"
                  type="radio"
                  name="aprovado-gestor"
                  id="aprovado-nao"
                  value="Não"
                />
                <label class="form-check-label" for="aprovado-nao"
                  >REPROVADO</label
                >
              </div>
            </div>

            <div
              class="mb-4"
              id="motivo-rejeicao-container"
              style="display: none"
            >
              <label for="motivo-rejeicao" class="form-label"
                >Motivo Detalhado da Reprovação (Gestor)</label
              >
              <textarea
                class="form-control"
                id="motivo-rejeicao"
                rows="2"
                placeholder="Descreva o motivo da reprovação pelo Gestor (Ex: Não atendeu aos requisitos técnicos específicos do time)."
              ></textarea>
            </div>

            <div class="d-grid gap-2 mt-4">
              <button
                type="submit"
                id="btn-registrar-gestor"
                class="btn btn-danger btn-lg"
              >
                <i class="fas fa-bullhorn me-2"></i> Registrar Decisão e Iniciar
                Comunicação Final
              </button>
            </div>
          </form>

          <hr class="my-4" />

          <div id="secao-comunicacao-final" style="display: none">
            <h5>Comunicação Final (WhatsApp)</h5>
            <div class="mb-3">
              <label for="modelo-mensagem" class="form-label"
                >Mensagem para
                <span id="status-comunicacao-label">Aprovação/Reprovação</span
                >:</label
              >
              <select class="form-select mb-2" id="modelo-mensagem">
                <option value="">Selecione o Modelo Padrão (Firebase)</option>
              </select>
              <textarea
                class="form-control"
                id="texto-mensagem-final"
                rows="6"
                placeholder="Edite o texto da mensagem antes de enviar..."
                required
              ></textarea>
            </div>

            <button
              type="button"
              class="btn btn-success"
              id="btn-enviar-whatsapp-final"
            >
              <i class="fab fa-whatsapp me-2"></i> Gerar Link WhatsApp e
              Finalizar
            </button>
            <p class="text-info small-info mt-2">
              Clique para gerar o link e enviar a comunicação final manualmente.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="../../modulos/rh/js/etapa_entrevista_gestor.js"></script>